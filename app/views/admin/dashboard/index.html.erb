<section data-controller="hide" class="sectioncontainer">
  <div data-hide-target="sidebarContainer" class="sidebar-container">
    <h2 class="sidebar-title">Painel de controle</h2>
    <div class="sidebar-content">
      <ul class="sidebarlist">
        <%= content_tag(:li, link_to("Projetos", "#", data: { action: "click->hide#show", hide_tab_param: "projetos"})) %>
        <%= content_tag(:li, link_to("Formações", "#", data: { action: "click->hide#show", hide_tab_param: "formacoes"}))%>
      </ul>
      <%= link_to "Disconectar!", destroy_user_session_path, data: { turbo_method: :delete } ,class: "btn btn-primary" %>
      <p class="sidebar-user">User: <%= current_user.email %></p>
    </div>
  </div>
  <div class="sidebarbtn">
    <button data-action="click->hide#toggleSidebar" class="sidebarhide-btn">
      ☰
    </button>
  </div>

  <div class="form-container">
    <h2 class="container-title">Bem vindo ao painel de controle!</h2>
    <!-- Formulário de Projetos -->
    <div id="form-projetos" class="form-section" data-hide-target="formProjetos" style="display: none;">
      <h3>Adicionar Novo Projeto</h3>
      <%= form_with url: "#", method: :post, data: { turbo: false } do |form| %>
        <div class="form-group">
          <%= form.label :name, "Nome do Projeto" %>
          <%= form.text_field :name, class: "form-control" %>
        </div>
        <div class="form-group">
          <%= form.label :description, "Descrição" %>
          <%= form.text_area :description, class: "form-control" %>
        </div>
        <%= form.submit "Adicionar", class: "btn" %>
      <% end %>
      <div data-controller="tabela">
        <button data-action="click->hide#toggleTabela" class="btn">Mostrar/Ocultar Tabela</button>
      </div>
    </div>
    
    <div id="TabelaProjetos" data-hide-target="tabela" class="hidden">
      <table class="table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Nome do Projeto</th>
            <th>Descrição</th>
            <th>Ações</th>
          </tr>
        </thead>
        <tbody>
          <% @projetos.each do |projeto| %>
            <tr>
              <td><%= projeto[:id] %></td>
              <td><%= projeto[:name] %></td>
              <td><%= projeto[:description] %></td>
              <td>
                <%#= link_to "Editar", edit_projeto_path(projeto), class: "btn btn-warning" %>
                <%="Editar"%>
                <%="Excluir"%>
                <%#= link_to "Excluir", projeto_path(projeto), method: :delete, class: "btn btn-danger", data: { confirm: "Tem certeza?" } %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>

    <!-- Formulário de Formações -->
    <div id="form-formacoes" class="form-section" data-hide-target="formFormacoes" style="display: none;">
      <h3>Adicionar Nova Formação</h3>
      <%= form_with url: "#", method: :post, data: { turbo: false } do |form| %>
        <div class="form-group">
          <%= form.label :title, "Título da Formação" %>
          <%= form.text_field :title, class: "form-control" %>
        </div>
        <div class="form-group">
          <%= form.label :description, "Descrição" %>
          <%= form.text_area :description, class: "form-control" %>
        </div>
        <%= form.submit "Adicionar", class: "btn" %>
      <% end %>
      <div data-controller="tabelaf">
        <button data-action="click->hide#toggleTabelaf" class="btn">Mostrar/Ocultar Tabela</button>
      </div>
    </div>
    
    <div id="TabelaFormacoes" data-hide-target="tabelaf" class="hidden">
      <table class="table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Nome da Formação</th>
            <th>Descrição</th>
            <th>Ações</th>
          </tr>
        </thead>
        <tbody>
          <% @formacoes.each do |formacao| %>
            <tr>
              <td><%= formacao[:id] %></td>
              <td><%= formacao[:name] %></td>
              <td><%= formacao[:description] %></td>
              <td>
                <%#= link_to "Editar", edit_projeto_path(projeto), class: "btn btn-warning" %>
                <%="Editar"%>
                <%="Excluir"%>
                <%#= link_to "Excluir", projeto_path(projeto), method: :delete, class: "btn btn-danger", data: { confirm: "Tem certeza?" } %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</section>